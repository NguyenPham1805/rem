import{d as Q,r as u,V as W,K as $,j as o,c as a,s as e,O as y,t as g,H as m,aj as T,D as V,F as p,M as S,B as j,N as X,ak as L,e as _,al as se,w as K,o as oe,a as le,f as A,L as ae,E as U,am as ne,an as G,b as J,g as re,u as ie,ah as ue,ao as ce,h as me,_ as de,k as pe,R as fe}from"./index.425d6e0a.js";const ve={class:"relative"},he=e("span",{class:"material-icons-outlined text-[1.3rem] sm:text-[1.5rem] group-hover:text-rem-color transition"}," close ",-1),xe=[he],_e={key:0,class:"absolute top-[120%] left-0 min-w-fit max-h-[50vh] overflow-auto min-scroll bg-rem-so-dark z-50 border border-rem-color"},ge={class:"flex flex-col justify-between"},ye=["onClick"],be={class:"w-6 h-6"},we={class:"material-icons-outlined text-[1.3rem] sm:text-[1.5rem] group-hover:text-rem-color"},ke={class:"w-max"},Ee=Q({props:{itemSelect:null,keySelect:null},emits:["change-value","delete"],setup(b){const r=u(!1);return(w,i)=>{const h=W("rem-click-away");return $((o(),a("div",ve,[e("button",{class:"border rounded text-sm sm:text-base border-rem-color px-2 py-1 flex items-center gap-1 cursor-pointer hover:text-rem-color bg-rem-dark",onClick:i[1]||(i[1]=()=>r.value=!r.value)},[y(g(m(T)(b.keySelect))+" - "+g(b.itemSelect.name)+" ",1),e("button",{class:"flex group",onClick:i[0]||(i[0]=V(d=>w.$emit("delete"),["stop"]))},xe)]),r.value?(o(),a("div",_e,[e("ul",ge,[(o(!0),a(p,null,S(m(L)[b.keySelect],d=>(o(),a("li",{class:j(["group text-sm sm:text-base hover:text-rem-color px-2 py-1 flex hover:bg-rem-quiet-dark hover:bg-opacity-30 items-center cursor-pointer transition w-full",d.slug==="hanh-dong"&&"hover:text-rem-color"]),onClick:()=>{w.$emit("change-value",d),r.value=!1}},[e("div",be,[$(e("span",we," check ",512),[[X,d.slug===b.itemSelect.slug]])]),e("div",ke,g(d.name),1)],10,ye))),256))])])):_("",!0)])),[[h,()=>r.value=!1]])}}});const Ce={class:"flex flex-col mt-6"},Se=["onSubmit"],$e={class:"group relative"},qe=e("span",{class:"material-icons-outlined translate-y-[1px] text-[13px] leading-none font-light bg-rem-color bg-opacity-25 z-10 rounded-full"}," close ",-1),Fe=[qe],Pe=e("span",{class:"absolute bg-rem-color h-[1px] left-0 right-0 bottom-0 scale-0 transition-all duration-500 peer-focus:scale-100"},null,-1),je=e("button",{class:"flex"},[e("span",{class:"material-icons-outlined"},"search")],-1),Be=e("h1",{class:"text-xl border-b-2 border-rem-color text-rem-color flex items-center mt-4 w-fit cursor-pointer"},[e("span",{class:"material-icons-outlined text-rem-color"},"filter_alt"),y(" L\u1ECDc Phim ")],-1),Re={class:"flex items-center flex-wrap gap-1 sm:gap-2 px-2 py-1 m-1 mt-2 max-w-lg"},De={class:"relative"},Ae=y(" Th\xEAm \u0111i\u1EC1u ki\u1EC7n l\u1ECDc "),Te=e("span",{class:"material-icons-outlined group-hover:text-rem-color text-[1.3rem] sm:text-[1.5rem]"}," add ",-1),Ve=[Ae,Te],Le={class:"flex flex-col cursor-pointer justify-between transition duration-300"},He=["onClick"],Me=e("span",{class:"material-icons"},"chevron_right",-1),Ne=e("span",{class:"material-icons mr-1"}," chevron_left ",-1),Oe={class:"flex flex-col cursor-pointer justify-between transition duration-300"},ze=["onClick"],Ie=y(" Duy\u1EC7t phim "),Ke={key:0,viewBox:"25 25 50 50"},Ue=e("circle",{cx:"50",cy:"50",r:"20"},null,-1),Ge=[Ue],Je={key:1,class:"flex flex-col items-center justify-center"},Qe=e("h2",{class:"text-2xl"},"Kh\xF4ng t\xECm th\u1EA5y k\u1EBFt qu\u1EA3 cho danh m\u1EE5c b\u1EA1n t\xECm ki\u1EBFm",-1),We=[Qe],Ze=Q({setup(b){const r=ie(),w=ue(),i=u(!0),h=u(!1),d=u(!1),B=u(!1),x=u([]),k=u(""),E=u(1),C=u(1),R=u(null),H=u(null),M=u(null),q=u("main"),F=u(0),N={main:H,menu:M},c=se({}),D=(t,s=!1)=>{if(t>C.value)return;i.value=!0,h.value=!1,B.value=!1;const f=r.query.q;f?ce(f,t).then(l=>{s?x.value.push(...l.items):x.value=l.items,C.value=Math.ceil(l.pagination.totalItems/l.pagination.totalItemsPerPage)}).catch(()=>h.value=!0).finally(()=>i.value=!1):me(r.query.slug,{slug:r.query.slug,category:r.query.category,sortField:r.query.sortField,country:r.query.country,year:r.query.year,page:t}).then(l=>{s?x.value.push(...l.items):x.value=l.items,C.value=Math.ceil(l.pagination.totalItems/l.pagination.totalItemsPerPage),E.value>=C.value&&(B.value=!0)}).catch(()=>h.value=!0).finally(()=>i.value=!1)},O=t=>{var s;(s=N[t])!=null&&s.value&&setTimeout(()=>{t==="main"?F.value=N[t].value.offsetHeight:F.value=350},0)},Y=(t,s)=>{q.value=s,O(t)},P=t=>{setTimeout(()=>{q.value="main",O("main"),d.value=t},0)},z=(t,s)=>{c[t]=s},Z=t=>{delete c[t],P(!1)},ee=()=>{var t,s,f,l,n;i.value=!0,!G(c)&&w.push({query:{slug:(t=c.slug)==null?void 0:t.slug,category:(s=c.category)==null?void 0:s.slug,sortField:(f=c.sortField)==null?void 0:f.slug,country:(l=c.country)==null?void 0:l.slug,year:(n=c.year)==null?void 0:n.slug}})},te=()=>{i.value=!0,w.push({query:{q:k.value}})},I=()=>{if(!B.value&&R.value.offsetHeight+R.value.offsetTop<document.documentElement.scrollTop+window.innerHeight){if(i.value||E.value>=(C.value||1))return;E.value++}};return window.addEventListener("scroll",I),K(()=>r.query,()=>{x.value=[],r.name==="Search"&&D(E.value)}),K(()=>E.value,t=>{D(t,!0)}),oe(()=>{document.title="Rem | T\xECm ki\u1EBFm phim phi\xEAn b\u1EA3n h\xE0ng hi\u1EC7u",D(1)}),le(()=>window.removeEventListener("scroll",I)),(t,s)=>{const f=W("rem-click-away");return o(),a(p,null,[A(de,{loading:!1,title:"T\xECm ki\u1EBFm h\xE0ng hi\u1EC7u"}),e("div",Ce,[e("form",{class:"flex w-full items-center justify-center sm:justify-end px-4",onSubmit:V(te,["prevent"])},[e("div",$e,[$(e("input",{class:"peer bg-transparent outline-none border-0 border-b border-rem-light py-[2px] px-2",type:"text",placeholder:"Nh\u1EADp t\u1EEB kh\xF3a...",autocomplete:"off",name:"search","onUpdate:modelValue":s[0]||(s[0]=l=>k.value=l)},null,512),[[ae,k.value,void 0,{trim:!0}]]),k.value.length?(o(),a("button",{key:0,class:"absolute right-1 top-1",type:"button",onClick:s[1]||(s[1]=()=>k.value="")},Fe)):_("",!0),Pe]),je],40,Se),Be,e("div",Re,[(o(!0),a(p,null,S(m(c),(l,n)=>(o(),J(Ee,{key:n,"item-select":l,keySelect:n,onChangeValue:v=>z(n,v),onDelete:()=>Z(n)},null,8,["item-select","keySelect","onChangeValue","onDelete"]))),128)),$((o(),a("div",De,[e("button",{class:"group border rounded text-sm sm:text-base hover:text-rem-color border-rem-color px-2 py-1 flex items-center active:opacity-70 bg-rem-dark",onClick:s[2]||(s[2]=V(l=>P(!d.value),["stop"]))},Ve),$(e("div",{class:"absolute top-[120%] -left-3 z-10 w-48 sm:w-52 md:w-64 rounded-sm overflow-hidden bg-rem-so-dark transition-all duration-300",style:U({height:F.value+"px"})},[e("div",{class:"relative duration-300 transition-all bg-rem-dark bg-opacity-30",style:U({height:F.value+"px"})},[e("div",{class:j(["absolute bottom-0 w-48 sm:w-52 md:w-64 flex flex-col justify-center transition-all duration-300",q.value==="main"?"left-0 opacity-100":"-left-full opacity-0"]),ref_key:"mainPopupRef",ref:H},[e("ul",Le,[(o(!0),a(p,null,S(m(ne)(m(L),m(c)),(l,n)=>(o(),a(p,{key:n},[n in m(c)?_("",!0):(o(),a("li",{key:0,class:"flex justify-between items-center px-2 py-1 sm:px-3 sm:py-2 hover:bg-rem-quiet-dark",onClick:v=>Y("menu",n)},[y(g(m(T)(n))+" ",1),Me],8,He))],64))),128))])],2),(o(!0),a(p,null,S(m(L),(l,n)=>(o(),a(p,{key:n},[n in m(c)?_("",!0):(o(),a("div",{key:0,class:j(["absolute top-0 max-h-full w-48 sm:w-52 md:w-64 transition-all duration-300 overflow-x-hidden overflow-y-auto min-scroll",q.value===n?"right-0 opacity-100":"-right-full opacity-0"])},[e("div",{class:"flex flex-col",ref_for:!0,ref_key:"menuPopupRef",ref:M},[e("h1",{class:"flex px-1 py-2 sm:px-2 sm:py-3 cursor-pointer font-semibold border-b border-gray-200",onClick:s[3]||(s[3]=v=>P(!0))},[Ne,y(" "+g(m(T)(n)),1)]),e("ul",Oe,[(o(!0),a(p,null,S(l,v=>(o(),a("li",{class:"flex justify-between items-center px-2 py-1 sm:px-3 sm:py-2 hover:bg-rem-quiet-dark",key:v.slug,onClick:Xe=>z(n,v)},g(v.name),9,ze))),128))])],512)],2))],64))),128))],4)],4),[[X,d.value]])])),[[f,()=>P(!1)]])]),e("button",{class:j(["rouded flex items-center gap-1 w-fit px-2 py-1 mt-2 rounded bg-rem-color text-rem-so-dark font-semibold active:opacity-70",(m(G)(m(c))||i.value)&&"opacity-50 select-none pointer-events-none"]),onClick:ee},[Ie,i.value?(o(),a("svg",Ke,Ge)):_("",!0)],2)]),h.value?(o(),a("div",Je,We)):(o(),a("div",{key:0,ref_key:"containerRef",ref:R},[i.value?(o(),J(fe,{key:0})):_("",!0),A(re,{list:x.value},null,8,["list"])],512)),A(pe)],64)}}});export{Ze as default};
