var U=Object.defineProperty,M=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var C=(o,s,t)=>s in o?U(o,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[s]=t,D=(o,s)=>{for(var t in s||(s={}))P.call(s,t)&&C(o,t,s[t]);if($)for(var t of $(s))W.call(s,t)&&C(o,t,s[t]);return o},B=(o,s)=>M(o,O(s));import{d as N,r as m,w as T,U as I,j as e,c as l,s as a,t as v,O as k,B as K,F as u,M as y,b as S,W as H,H as h,ap as Q,E as X,e as j,aq as z,ac as G,ad as V,a9 as q,z as F,T as J,o as Y,a as Z,f as L,S as ee,af as se,V as te,_ as le,ae,K as oe,ar as ne,as as ie,Q as re}from"./index.425d6e0a.js";const ce={class:"flex"},ue={class:"flex justify-between px-5 py-1 w-full"},de={class:"text-rem-color"},me={key:0,class:"flex justify-center py-2"},ve=a("div",{class:"spiner"},null,-1),pe=[ve],fe={key:1,class:"flex flex-col px-6 sm:px-8 py-2 sm:pl-10 gap-1 m-1 bg-rem-so-dark bg-opacity-50 max-h-64 overflow-auto min-scroll"},_e={class:"group-hover:text-rem-color"},xe={class:"font-light text-gray-400"},he={class:"w-full sm:max-w-sm h-1 bg-rem-quiet-dark bg-opacity-50"},ge=N({props:{uid:null,filmId:null,epLastest:null,slug:null},setup(o){const s=o,t=m(!1),i=m(!1),p=m(null);return T(()=>i.value,()=>{var d;(d=p.value)!=null&&d.length||(t.value=!0,z(G(q(F,`users/${s.uid}/recent/${s.filmId}/episode`),V("createdAt","desc"))).then(c=>{p.value=c.docs.map(f=>f.data()),t.value=!1}))}),(d,c)=>{const f=I("router-link");return e(),l(u,null,[a("div",ce,[a("div",ue,[a("span",de,"G\u1EA7n nh\u1EA5t: T\u1EADp "+v(o.epLastest),1),a("button",{class:"flex items-center font-semibold text-sm hover:text-rem-color group",onClick:c[0]||(c[0]=()=>i.value=!i.value)},[k(v(i.value?"\u1EA8n b\u1EDBt":"Xem T\u1EA5t c\u1EA3")+" ",1),a("span",{class:K(["material-icons group-hover:text-rem-color transition-all",i.value&&"rotate-180"])}," expand_more ",2)])])]),i.value?(e(),l(u,{key:0},[t.value?(e(),l("div",me,pe)):(e(),l("div",fe,[(e(!0),l(u,null,y(p.value,r=>(e(),S(f,{class:"group flex flex-col px-2 py-1 hover:bg-rem-quiet-dark hover:bg-opacity-30",to:{name:"Watch",params:{slug:o.slug},query:{episode_index:r.epIndex}},key:r.epIndex},{default:H(()=>[a("h2",_e,"T\u1EADp "+v(r.epName),1),a("span",xe,v(h(Q)(r.createdAt.seconds*1e3)),1),a("div",he,[a("div",{class:"h-full bg-rem-color",style:X({width:(r.duration!==0?r.currentTime/r.duration*100:0)+"%"})},null,4)])]),_:2},1032,["to"]))),128))]))],64)):j("",!0)],64)}}}),ye={key:0,class:"flex justify-center text-xl mt-4 font-normal"},ke=k(" H\xE3y "),Ee=k(" \u0111\u1EC3 tr\u1EA3i nghi\u1EC7m t\xEDnh n\u0103ng n\xE0y "),we={key:0,class:"flex flex-col gap-3 sm:gap-4 mt-4"},be=re('<div class="w-28 sm:w-32 md:w-36 drop-shadow-lg skt-item"></div><div class="flex flex-col w-full gap-2"><div class="w-[90%] h-5 rounded-md skt-item"></div><div class="w-[60%] h-5 rounded-md skt-item"></div><div class="w-[90%] h-4 rounded-md skt-item"></div><div class="w-[50%] h-4 rounded-md skt-item"></div><div class="w-20 h-4 rounded-full skt-item"></div><div class="w-20 h-4 rounded-full skt-item"></div><div class="w-20 h-4 rounded-full skt-item"></div><div class="w-20 h-4 rounded-full skt-item"></div></div>',2),Ae=[be],$e={key:0,class:"flex justify-center text-xl mt-4"},Ce={class:"w-28 sm:w-32 md:w-36 object-cover"},De={class:"flex flex-col gap-1"},Be={class:"break-line-2 text-lg sm:text-2xl leading-5"},Le={class:"break-line-2 sm:text-xl text-gray-400 leading-5"},Ne={class:"flex flex-wrap gap-1 p-1"},Se=N({setup(o){const s=ee(),t=m(!1),i=m([]),p=m(0),E=m(null),d=m(null),c=J(()=>s.getters.getUser),f=()=>{s.dispatch(ae.TOGGLE_SIGN_IN,!0)},r=()=>{var _;t.value=!0,z(G(q(F,`users/${(_=c.value)==null?void 0:_.uid}/recent`),V("createdAt","desc"),se(10))).then(x=>{p.value=x.size,E.value=x.docs[x.docs.length-1],i.value=[...i.value,...x.docs.map(g=>B(D({},g.data()),{id:g.id}))],t.value=!1})},w=()=>{if(!!d.value&&d.value.offsetHeight+d.value.offsetTop<document.documentElement.scrollTop+window.innerHeight){if(i.value.length>=p.value)return;r()}};return T(()=>c.value,_=>{_&&r()}),window.addEventListener("scroll",w),Y(()=>{document.title="Rem | l\u1ECBch s\u1EED",c.value&&r()}),Z(()=>{window.removeEventListener("scroll",w)}),(_,x)=>{var b;const g=I("router-link"),R=te("lazy");return e(),l(u,null,[L(le,{title:"L\u1ECBch s\u1EED",loading:!1}),h(c)?(e(),l(u,{key:1},[t.value?(e(),l("div",we,[(e(),l(u,null,y(5,n=>a("div",{class:"flex gap-1",key:n},Ae)),64))])):(e(),l(u,{key:1},[(b=i.value)!=null&&b.length?(e(),l("div",{key:1,class:"flex mt-4 flex-col gap-3 sm:gap-4",ref_key:"containerRef",ref:d},[(e(!0),l(u,null,y(i.value,n=>(e(),l("div",{class:"flex flex-col bg-rem-so-dark bg-opacity-50",key:n.slug},[L(g,{class:"flex gap-2 p-1 hover:bg-gray-600 hover:bg-opacity-30",to:{name:"Watch",params:{slug:n.slug},query:{episode_index:n.epLastest||0}}},{default:H(()=>[oe(a("img",Ce,null,512),[[R,h(ne)(n.thumb_url,h(ie))]]),a("div",De,[a("h2",Be,v(n.name),1),a("p",Le,v(n.originName),1),a("div",Ne,[(e(!0),l(u,null,y(n.category,A=>(e(),l("span",{class:"text-[13px] sm:text:sm md:text-base text-rem",key:A.name}," #"+v(A.name),1))),128))])])]),_:2},1032,["to"]),n.type!=="single"?(e(),S(ge,{key:0,"film-id":n.id,uid:h(c).uid,"ep-lastest":n.epLastestName,slug:n.slug},null,8,["film-id","uid","ep-lastest","slug"])):j("",!0)]))),128))],512)):(e(),l("div",$e," B\u1EA1n kh\xF4ng c\xF3 l\u1ECBch s\u1EED \u0111\xE3 xem n\xE0o "))],64))],64)):(e(),l("div",ye,[ke,a("button",{class:"text-rem text-xl mx-1",onClick:f},"\u0111\u0103ng nh\u1EADp"),Ee]))],64)}}});export{Se as default};
