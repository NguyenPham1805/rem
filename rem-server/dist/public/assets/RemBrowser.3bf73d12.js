import{d as x,r as e,o as y,w as F,a as b,c as g,b as w,e as u,f as _,_ as R,g as B,F as L,u as P,h as A,i as $,j as n,k as C,l as D,R as T}from"./index.425d6e0a.js";const j={key:2,class:"flex p-2 justify-center text-rem-color font-light sm:text-xl"},M=x({setup(H){const i=P(),c=e([]),l=e(!1),s=e(1),r=e(1),v=e(!1),m=e(i.params.slug),f=e(null),h=e("Rem | Phim m\u1EDBi"),o=e(!1),d=async t=>{l.value=!0,o.value=!1,s.value>=r.value&&(v.value=!0);let a="";switch(m.value){case"tv-series":a="phim-bo";break;case"tv-shows":a="tv-shows";break;case"movie":a="phim-le";break;case"anime":a="hoat-hinh";break}A(a,{page:t}).then(p=>{c.value.push(...p.items),r.value=Math.ceil(p.pagination.totalItems/p.pagination.totalItemsPerPage)}).catch(()=>o.value=!0).finally(()=>l.value=!1)},k=()=>{if(f.value.offsetHeight+f.value.offsetTop<document.documentElement.scrollTop+window.innerHeight){if(l.value||s.value>=(r.value||1))return;d(++s.value)}},E=()=>{const t=$.find(a=>a.path===m.value);h.value=(t==null?void 0:t.name)||"",document.title="Rem | "+h.value};return y(()=>{d(s.value),E()}),window.addEventListener("scroll",k),F(()=>i.params.slug,t=>{i.name==="List"&&(m.value=t,E(),c.value=[],s.value=1,d(s.value),v.value=!1)}),b(()=>{window.removeEventListener("scroll",k)}),(t,a)=>(n(),g(L,null,[o.value?(n(),w(D,{key:0})):u("",!0),_(R,{loading:l.value,title:h.value},null,8,["loading","title"]),o.value?u("",!0):(n(),g("div",{key:1,class:"pt-8",ref_key:"containerRef",ref:f},[_(B,{list:c.value},null,8,["list"]),l.value?(n(),w(T,{key:0})):u("",!0)],512)),_(C),v.value?(n(),g("div",j," C\xF3 nhi\xEAu \u0111\xF3 phim th\xF4i b\u1EEFa n\xE0o v\xF4 l\u1EA1i c\u1EADp nh\u1EADt ti\u1EBFp cho ")):u("",!0)],64))}});export{M as default};
